function [max_dev] = max_dev(v_start,dz,res,params,err)

beta_start = fabian_original_beta(params,v_start(1),v_start(2));
% dz = dir*(10^-28);
v_end = v_start +dz;
beta_end = fabian_original_beta(params,v_end(1),v_end(2));

max_dev = 0;
min_dev = 0;
% res = 1000;
eta_plot = zeros(res);
dev_b_plot = zeros(res);
for i = 1:res
    test_dev_pts = req_v1v2points(v_start,v_end,res);
    
    beta = fabian_original_beta(params,test_dev_pts(i,1),test_dev_pts(i,2));
    
    b = b_terminalbase(v_start,beta_start,v_end,beta_end,test_dev_pts(i,:));
    
    
    eta = sqrt((test_dev_pts(i,2) - v_start(2))^2 + (test_dev_pts(i,1) - v_start(1))^2);
    dev_b = (beta-b)/beta;
    
    
    if(dev_b > max_dev)
        max_dev = dev_b;
    elseif(dev_b<min_dev)
        min_dev = dev_b;
    end


end
if(strcmp(err,'check_error'))
    hold on
    plot(eta_plot,b,'o')
    plot(eta,beta,'x')
    input('check error'); 
end
max_dev = abs(max_dev) + abs(min_dev);

end

